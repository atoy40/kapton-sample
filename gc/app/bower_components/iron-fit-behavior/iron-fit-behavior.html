<html><head><link rel="import" href="../polymer/polymer.html"><script>Polymer.IronFitBehavior={properties:{sizingTarget:{type:Object,value:function(){return this}},fitInto:{type:Object,value:window},noOverlap:{type:Boolean},positionTarget:{type:Element},horizontalAlign:{type:String},verticalAlign:{type:String},dynamicAlign:{type:Boolean},horizontalOffset:{type:Number,value:0,notify:!0},verticalOffset:{type:Number,value:0,notify:!0},autoFitOnAttach:{type:Boolean,value:!1},_fitInfo:{type:Object}},get _fitWidth(){var a;return a=this.fitInto===window?this.fitInto.innerWidth:this.fitInto.getBoundingClientRect().width,a},get _fitHeight(){var a;return a=this.fitInto===window?this.fitInto.innerHeight:this.fitInto.getBoundingClientRect().height,a},get _fitLeft(){var a;return a=this.fitInto===window?0:this.fitInto.getBoundingClientRect().left,a},get _fitTop(){var a;return a=this.fitInto===window?0:this.fitInto.getBoundingClientRect().top,a},get _defaultPositionTarget(){var a=Polymer.dom(this).parentNode;return a&&a.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(a=a.host),a},get _localeHorizontalAlign(){if(this._isRTL){if('right'===this.horizontalAlign)return'left';if('left'===this.horizontalAlign)return'right'}return this.horizontalAlign},get __shouldPosition(){return(this.horizontalAlign||this.verticalAlign)&&('center'!==this.horizontalAlign||'middle'!==this.verticalAlign)},attached:function(){'undefined'===typeof this._isRTL&&(this._isRTL='rtl'==window.getComputedStyle(this).direction),this.positionTarget=this.positionTarget||this._defaultPositionTarget,this.autoFitOnAttach&&('none'===window.getComputedStyle(this).display?setTimeout(function(){this.fit()}.bind(this)):(window.ShadyDOM&&ShadyDOM.flush(),this.fit()))},detached:function(){this.__deferredFit&&(clearTimeout(this.__deferredFit),this.__deferredFit=null)},fit:function(){this.position(),this.constrain(),this.center()},_discoverInfo:function(){if(!this._fitInfo){var b=window.getComputedStyle(this),c=window.getComputedStyle(this.sizingTarget);this._fitInfo={inlineStyle:{top:this.style.top||'',left:this.style.left||'',position:this.style.position||''},sizerInlineStyle:{maxWidth:this.sizingTarget.style.maxWidth||'',maxHeight:this.sizingTarget.style.maxHeight||'',boxSizing:this.sizingTarget.style.boxSizing||''},positionedBy:{vertically:'auto'===b.top?'auto'===b.bottom?null:'bottom':'top',horizontally:'auto'===b.left?'auto'===b.right?null:'right':'left'},sizedBy:{height:'none'!==c.maxHeight,width:'none'!==c.maxWidth,minWidth:parseInt(c.minWidth,10)||0,minHeight:parseInt(c.minHeight,10)||0},margin:{top:parseInt(b.marginTop,10)||0,right:parseInt(b.marginRight,10)||0,bottom:parseInt(b.marginBottom,10)||0,left:parseInt(b.marginLeft,10)||0}}}},resetFit:function(){var b=this._fitInfo||{};for(var c in b.sizerInlineStyle)this.sizingTarget.style[c]=b.sizerInlineStyle[c];for(var c in b.inlineStyle)this.style[c]=b.inlineStyle[c];this._fitInfo=null},refit:function(){var b=this.sizingTarget.scrollLeft,c=this.sizingTarget.scrollTop;this.resetFit(),this.fit(),this.sizingTarget.scrollLeft=b,this.sizingTarget.scrollTop=c},position:function(){if(this.__shouldPosition){this._discoverInfo(),this.style.position='fixed',this.sizingTarget.style.boxSizing='border-box',this.style.left='0px',this.style.top='0px';var b=this.getBoundingClientRect(),c=this.__getNormalizedRect(this.positionTarget),d=this.__getNormalizedRect(this.fitInto),e=this._fitInfo.margin,f={width:b.width+e.left+e.right,height:b.height+e.top+e.bottom},a=this.__getPosition(this._localeHorizontalAlign,this.verticalAlign,f,b,c,d),g=a.left+e.left,h=a.top+e.top,j=Math.min(d.right-e.right,g+b.width),k=Math.min(d.bottom-e.bottom,h+b.height);g=Math.max(d.left+e.left,Math.min(g,j-this._fitInfo.sizedBy.minWidth)),h=Math.max(d.top+e.top,Math.min(h,k-this._fitInfo.sizedBy.minHeight)),this.sizingTarget.style.maxWidth=Math.max(j-g,this._fitInfo.sizedBy.minWidth)+'px',this.sizingTarget.style.maxHeight=Math.max(k-h,this._fitInfo.sizedBy.minHeight)+'px',this.style.left=g-b.left+'px',this.style.top=h-b.top+'px'}},constrain:function(){if(!this.__shouldPosition){this._discoverInfo();var b=this._fitInfo;b.positionedBy.vertically||(this.style.position='fixed',this.style.top='0px'),b.positionedBy.horizontally||(this.style.position='fixed',this.style.left='0px'),this.sizingTarget.style.boxSizing='border-box';var c=this.getBoundingClientRect();b.sizedBy.height||this.__sizeDimension(c,b.positionedBy.vertically,'top','bottom','Height'),b.sizedBy.width||this.__sizeDimension(c,b.positionedBy.horizontally,'left','right','Width')}},_sizeDimension:function(b,c,d,e,f){this.__sizeDimension(b,c,d,e,f)},__sizeDimension:function(b,c,d,e,f){var g=this._fitInfo,h=this.__getNormalizedRect(this.fitInto),j='Width'===f?h.width:h.height,k=c===e,m=k?j-b[e]:b[d],n=g.margin[k?d:e],o='offset'+f,p=this[o]-this.sizingTarget[o];this.sizingTarget.style['max'+f]=j-n-m-p+'px'},center:function(){if(!this.__shouldPosition){this._discoverInfo();var b=this._fitInfo.positionedBy;if(!(b.vertically&&b.horizontally)){this.style.position='fixed',b.vertically||(this.style.top='0px'),b.horizontally||(this.style.left='0px');var c=this.getBoundingClientRect(),d=this.__getNormalizedRect(this.fitInto);if(!b.vertically){var e=d.top-c.top+(d.height-c.height)/2;this.style.top=e+'px'}if(!b.horizontally){var f=d.left-c.left+(d.width-c.width)/2;this.style.left=f+'px'}}}},__getNormalizedRect:function(b){return b===document.documentElement||b===window?{top:0,left:0,width:window.innerWidth,height:window.innerHeight,right:window.innerWidth,bottom:window.innerHeight}:b.getBoundingClientRect()},__getOffscreenArea:function(b,c,d){var e=Math.min(0,b.top)+Math.min(0,d.bottom-(b.top+c.height)),f=Math.min(0,b.left)+Math.min(0,d.right-(b.left+c.width));return Math.abs(e)*c.width+Math.abs(f)*c.height},__getPosition:function(b,c,d,e,f,g){var h=[{verticalAlign:'top',horizontalAlign:'left',top:f.top+this.verticalOffset,left:f.left+this.horizontalOffset},{verticalAlign:'top',horizontalAlign:'right',top:f.top+this.verticalOffset,left:f.right-d.width-this.horizontalOffset},{verticalAlign:'bottom',horizontalAlign:'left',top:f.bottom-d.height-this.verticalOffset,left:f.left+this.horizontalOffset},{verticalAlign:'bottom',horizontalAlign:'right',top:f.bottom-d.height-this.verticalOffset,left:f.right-d.width-this.horizontalOffset}];if(this.noOverlap){for(var m,j=0,k=h.length;j<k;j++){for(var n in m={},h[j])m[n]=h[j][n];h.push(m)}h[0].top=h[1].top+=f.height,h[2].top=h[3].top-=f.height,h[4].left=h[6].left+=f.width,h[5].left=h[7].left-=f.width}c='auto'===c?null:c,b='auto'===b?null:b,b&&'center'!==b||(h.push({verticalAlign:'top',horizontalAlign:'center',top:f.top+this.verticalOffset+(this.noOverlap?f.height:0),left:f.left-e.width/2+f.width/2+this.horizontalOffset}),h.push({verticalAlign:'bottom',horizontalAlign:'center',top:f.bottom-d.height-this.verticalOffset-(this.noOverlap?f.height:0),left:f.left-e.width/2+f.width/2+this.horizontalOffset})),c&&'middle'!==c||(h.push({verticalAlign:'middle',horizontalAlign:'left',top:f.top-e.height/2+f.height/2+this.verticalOffset,left:f.left+this.horizontalOffset+(this.noOverlap?f.width:0)}),h.push({verticalAlign:'middle',horizontalAlign:'right',top:f.top-e.height/2+f.height/2+this.verticalOffset,left:f.right-d.width-this.horizontalOffset-(this.noOverlap?f.width:0)}));for(var o,j=0;j<h.length;j++){var p=h[j],q=p.verticalAlign===c,r=p.horizontalAlign===b;if(!this.dynamicAlign&&!this.noOverlap&&q&&r){o=p;break}var s=(!c||q)&&(!b||r);if(this.dynamicAlign||s){if(p.offscreenArea=this.__getOffscreenArea(p,d,g),0===p.offscreenArea&&s){o=p;break}o=o||p;var t=p.offscreenArea-o.offscreenArea;(0>t||0===t&&(q||r))&&(o=p)}}return o}};</script></head><body></body></html>